using UnityEngine;
using System.Collections;
#if UNITY_5_5_OR_NEWER
using UnityEngine.AI;
#endif

namespace STB.PACS
{
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    /// <summary>
    /// Class: GenericIndividualDetector
    /// # 
    /// </summary>
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    public class GenericIndividualDetector : MonoBehaviour
    {
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>
        /// Awake
        /// </summary>
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        void Awake()
        {
            SphereCollider actualSphereCollider = this.gameObject.AddComponent<SphereCollider>();
            actualSphereCollider.isTrigger = true;
            actualSphereCollider.radius = 2;
        }
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>
        /// OnTriggerEnter
        /// </summary>
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        void OnTriggerEnter(Collider col)
        {
            //Debug.Log("col: " + col.name);

            OnTriggerEnterExtended(col);
        }
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>
        /// OnTriggerEnterExtended
        /// </summary>
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        protected virtual void OnTriggerEnterExtended(Collider col)
        {
            GenericIndividual actualGenericIndividual = col.gameObject.GetComponent<GenericIndividual>();

            if (actualGenericIndividual)
            {
                //Debug.Log("Generic individual detected: " + col.name);

                actualGenericIndividual.GoToIdle(true, 0);
            }
        }
    }
}
